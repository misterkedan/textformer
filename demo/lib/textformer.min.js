!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Textformer=e():t.Textformer=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{Textformer:()=>Textformer});var r={int:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},uint:function(t){return r.int(0,t)},char:function(t){return t.charAt(r.uint(t.length-1))}};function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Textform=function(){function Textform(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.from,r=t.to,o=t.steps,i=t.stagger,s=t.noise,u=t.charset,a=t.origin,c=t.output;n(this,Textform),Object.assign(this,{from:e,to:r,steps:o,stagger:i,noise:s,charset:u,origin:a,output:c}),this.length=Math.max(e.length,r.length),c&&(c.textform=this),this.build(),this.reset()}var t,e,i;return t=Textform,(e=[{key:"build",value:function(){var t=this,e=this.length,n=this.from,o=this.to,i=this.compute(),s=function(e){var s=n.charAt(e),u=o.charAt(e),a=function(t){return t.match(/\r|\n|\t/)};if(a(s))return[{frame:0,char:s}];if(a(u))return[{frame:0,char:u}];var c=t.applyNoise(t.steps),f=i[e],l=f+c;return Array.from({length:c+1},(function(e,n){return function(e){var n=f+e;return{frame:n,char:n===f?s:n===l?u:r.char(t.charset)}}(n)}))},u=Array.from({length:e},(function(t,e){return s(e)}));this.finalFrame=u.flat().reduce((function(t,e){return Math.max(t,e.frame)}),0),this.scenario=u}},{key:"compute",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin;return n?Array.from({length:e},(function(o,i){var s=i-n,u=s>=0?s*r:(e+s)*r;return t.applyNoise(u)})):Array.from({length:e},(function(e,n){var o=n*r;return t.applyNoise(o)}))}},{key:"applyNoise",value:function(t){var e=this.noise;return e?r.int(t,t+e):t}},{key:"getCharAt",value:function(t,e){var r=this.scenario[t],n=r.filter((function(t){return t.frame===e}))[0];if(!n){var o=r[0].frame,i=r[r.length-1].frame,s=e>i?i:o;n=r.filter((function(t){return t.frame===s}))[0]}return n.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this,e=this.frame,r=this.length,n=this.output;this.chars=Array.from({length:r},(function(r,n){return t.getCharAt(n,e)})),this.text=this.chars.join(""),n&&n.update()}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.finalFrame*t)}},{key:"hasOrigin",get:function(){var t=this.origin,e=this.length;return void 0!==t&&t>=0&&t<e}}])&&o(t.prototype,e),i&&o(t,i),Textform}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.callbacks="function"==typeof e?[e]:e,this.fps=r,this.elapsed=0,this._previous=0,this._delta=0,this._isPlaying=!1}var e,r,n;return e=t,r=[{key:"reset",value:function(){this.elapsed=0}},{key:"start",value:function(){this._previous=this.now,this._delta=0,this._isPlaying=!0,this.requestAnimationFrame()}},{key:"pause",value:function(){this._isPlaying=!1}},{key:"stop",value:function(){this.pause(),this.reset()}},{key:"update",value:function(){if(this.isPlaying){var t=this.now,e=t-this._previous;this._previous=t,this._delta+=e,this.elapsed+=e;var r=this._frameDuration-this._delta;r<=0&&(this.callbacks.forEach((function(t){return t.call()})),this._delta=Math.abs(r)),this.requestAnimationFrame()}}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){requestAnimationFrame(this.update.bind(this))}))},{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t,this._frameDuration=t>0?Math.floor(1e3/t):0}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"now",get:function(){return t.time.now()}}],r&&s(e.prototype,r),n&&s(e,n),t}();u.time=void 0===performance?Date:performance;var a={linear:function(t){return t}},c={Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Quad:function(t){return Math.pow(t,2)},Cubic:function(t){return Math.pow(t,4)},Quart:function(t){return Math.pow(t,6)},Quint:function(t){return Math.pow(t,8)},Expo:function(t){return Math.pow(t,10)}};Object.keys(c).forEach((function(t){var e=c[t];a["easeIn"+t]=e,a["easeOut"+t]=function(t){return 1-e(1-t)},a["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}));var f={};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.keys(a).forEach((function(t){var e=t.toUpperCase(),r=e.match(/(EASEINOUT|EASEOUT|EASEIN)(.*)/);if(r){var n=r[1].replace("EASE","").replace("INOUT","IN_OUT"),o=r[2];e="".concat(o,"_").concat(n)}f[e]=t})),a.keys=f;var TextformPlayer=function(){function TextformPlayer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.textform,r=t.delay,n=t.duration,o=t.easing,i=t.reversed,s=t.reverseSpeed,c=t.reverseDelay,f=t.repeat,p=t.yoyo,h=t.onBegin,y=t.onUpdate,v=t.onChange,d=t.onComplete;l(this,TextformPlayer),this.clock=new u(this.animate.bind(this),TextformPlayer.FPS_CAP),this._progress=0,this._isReversed=i,c||(c=r),Object.assign(this,{textform:e,delay:r,duration:n,reverseSpeed:s,reverseDelay:c,repeat:f,isYoyo:p,onBegin:h,onUpdate:y,onChange:v,onComplete:d}),this.ease=a[o]||a.linear}var t,e,r;return t=TextformPlayer,e=[{key:"animate",value:function(){var t=this.isReversed?this.reverseSpeed:1,e=this.isReversed?this.reverseDelay:this.delay,r=this.clock.elapsed*t-e;if(!(r<0)){this.onUpdate&&this.onUpdate.call();var n=r/this.duration;this.progress=this.isReversed?1-n:n,n>=1&&(this.progress=Math.round(this.progress),this.isReversed&&this.onBegin?this.onBegin.call():this.onComplete&&this.onComplete.call(),this.isYoyo&&(this.isReversed=!this.isReversed),this.stop(),0!==this.repeat&&this.play(!0),this.repeat>0&&this.repeat--)}}},{key:"reset",value:function(){this.textform.progress=this.isReversed?1:0}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isPlaying||this.isComplete)&&(this.stop(),t||(this.reset(),this.isReversed&&this.onComplete?this.onComplete.call():!this.isReversed&&this.onBegin&&this.onBegin.call())),this.start()}},{key:"start",value:function(){this.clock.start()}},{key:"pause",value:function(){this.clock.pause()}},{key:"stop",value:function(){this.clock.stop()}},{key:"setClockFromProgress",value:function(){this.clock.elapsed=this.isReversed?(this.delay+(1-this.progress)*this.duration)/this.reverseSpeed:this.delay+this.progress*this.duration}},{key:"frame",get:function(){return this.textform.frame}},{key:"progress",get:function(){return this._progress},set:function(t){t<0?t=0:t>1&&(t=1),this._progress=t,this.isPlaying||this.setClockFromProgress();var e=this.textform.frame;this.textform.progress=this.ease(t),this.textform.frame!==e&&this.onChange&&this.onChange.call()}},{key:"isReversed",get:function(){return this._isReversed},set:function(t){t!==this._isReversed&&(this._isReversed=t,this.setClockFromProgress())}},{key:"isPlaying",get:function(){return this.clock.isPlaying}},{key:"isComplete",get:function(){return this.isYoyo?this.isReversed?this.progress>=1:this.progress<=0:this.isReversed?this.progress<=0:this.progress>=1}}],e&&p(t.prototype,e),r&&p(t,r),TextformPlayer}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=g(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},d.apply(this,arguments)}function g(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_(t);if(e){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}TextformPlayer.FPS_CAP=60;var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(i,t);var e,r,n,o=b(i);function i(){return y(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"compute",value:function(){return d(_(i.prototype),"compute",this).call(this).reverse()}}])&&v(e.prototype,r),n&&v(e,n),i}(Textform);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x(t);if(e){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(i,t);var e,r,n,o=S(i);function i(){return j(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"compute",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasOrigin,i=o?n:Math.floor((e-1)/2),s=o||e%2!=0?i:i+1;return Array.from({length:e},(function(e,n){var o=n<s?i-n:n-s;return t.applyNoise(o*r)}))}}])&&k(e.prototype,r),n&&k(e,n),i}(Textform);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L(t,e){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=F(t);if(e){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return U(this,r)}}function U(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(i,t);var e,r,n,o=M(i);function i(){return C(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"compute",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasOrigin?n:Math.round((e-1)/2);return Array.from({length:e},(function(n,i){var s=i<o?i:e-1-i;return t.applyNoise(s*r)}))}}])&&D(e.prototype,r),n&&D(e,n),i}(Textform);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function I(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=Q(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Y.apply(this,arguments)}function Q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}function V(t,e){return V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},V(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$(t);if(e){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}function W(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(i,t);var e,r,n,o=X(i);function i(){return G(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"compute",value:function(){var t=this.origin,e=this.stagger,r=i.shuffle(Y($(i.prototype),"compute",this).call(this));return this.hasOrigin&&e>0?((r=r.filter((function(t){return t>0}))).splice(t,0,0),r):r}}])&&H(e.prototype,r),n&&H(e,n),i}(Textform);J.shuffle=function(t){for(var e=I(t),r=t.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),o=[e[n],e[r]];e[r]=o[0],e[n]=o[1]}return e};var K="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Z=K.toLowerCase(),z="0123456789",tt="!@#$%&",et=[K,Z,z,tt].join(""),rt={UPPERCASE:K,LOWERCASE:Z,DIGITS:z,SYMBOLS:tt,ALL:et},nt={pad:function(t,e,r,n){var o=n-t.length;if(0===o)return t;var i,s,u,a={left:function(){return 0},center:function(){return Math.floor(o/2)},right:function(){return o},default:function(){return e}},c=(a[e]||a.default)();return(i=r,s=t,u=c,[i.slice(0,u),s,i.slice(u)].join("")).slice(0,n)},align:function(t,e,r){if(e===nt.to.NONE)return t;r||(r=" ");var n=t.reduce((function(t,e){return Math.max(t,e.length)}),0),o=r.length,i=Math.ceil(n/o),s=r.repeat(i).substring(0,n);return t.map((function(t){return nt.pad(t,e,s,n)}))},to:{NONE:"none",LEFT:"left",CENTER:"center",RIGHT:"right"}};function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var it=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e}var e,r,n;return e=t,(r=[{key:"update",value:function(){var t=this;if(this.textform){var e=this.textform.text;if(this.object)return this.object.textform=e;if(this.console)return console.log(e);if(this.elements){var r=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},n=function(n){for(var o=[],i=0;i<n.length;i++)" "===(null==t?void 0:t.referenceText.charAt(i))?o.push(" "):" "===e.charAt(i)?o.push("&numsp;"):o.push(r(e.charAt(i)));return o.join("").replace(/\t/g,"&emsp;").replace(/\n/g,"<br>")}(e);this.elements.forEach((function(t){return t.innerHTML=n}))}}}},{key:"input",get:function(){return this._input},set:function(t){if(this.console=null,this.elements=null,this.object=null,void 0!==t)if(t!==console)if(void 0===t.innerHTML){if("string"==typeof t){if(t.match(/\.\w\S*/)){var e=document.getElementsByClassName(t.substring(1));return void(e.length&&(this.elements=Array.from(e)))}if(t.match(/#\w\S*/)){var r=document.querySelector(t);return void(r&&(this.elements=[r]))}}try{void 0===t.textform&&(t.textform=""),this.object=t}catch(t){return}}else this.elements=[t];else this.console=t}},{key:"isValid",get:function(){return void 0!==this.object||void 0!==this.console||void 0!==this.elements}},{key:"inputText",get:function(){return this.object&&this.object.textform?this.object.textform:this.elements?this.elements[0].textContent:void 0}}])&&ot(e.prototype,r),n&&ot(e,n),t}();function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){at(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function at(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Textformer=function(){function Textformer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode,r=void 0===e?Textformer.modes.BASIC:e,n=t.from,o=t.to,i=t.steps,s=void 0===i?5:i,u=t.stagger,a=void 0===u?3:u,c=t.noise,f=void 0===c?0:c,l=t.charset,p=void 0===l?Textformer.charsets.ALL:l,h=t.origin,y=t.output,v=t.align,d=void 0===v?Textformer.align.NONE:v,g=t.fill,m=void 0===g?" ":g,b=t.autoplay,O=void 0===b||b,_=t.speed,w=void 0===_?Textformer.DEFAULT_SPEED:_,E=t.easing,j=void 0===E?Textformer.DEFAULT_EASING:E,k=t.delay,P=void 0===k?0:k,S=t.duration,R=void 0===S?0:S,x=t.reversed,A=void 0!==x&&x,T=t.reverseSpeed,C=void 0===T?1:T,D=t.reverseDelay,L=t.repeat,M=void 0===L?0:L,U=t.loop,F=void 0!==U&&U,N=t.yoyo,B=void 0!==N&&N,I=t.onBegin,q=t.onUpdate,G=t.onChange,H=t.onComplete,Y=t.hover,Q=void 0!==Y&&Y,V=t.press,X=void 0!==V&&V;ct(this,Textformer),this.__init(),this.build({mode:r,from:n,to:o,steps:s,stagger:a,noise:f,charset:p,origin:h,output:y,align:d,fill:m,autoplay:O,speed:w,easing:j,delay:P,duration:R,reversed:A,reverseSpeed:C,reverseDelay:D,repeat:M,loop:F,yoyo:B,onBegin:I,onUpdate:q,onChange:G,onComplete:H,hover:Q,press:X})}var t,e,r;return t=Textformer,e=[{key:"build",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;this.options=t,this.dispose();var e={default:Textform,basic:Textform,reverse:w,expand:A,collapse:N,shuffle:J},r=e[t.mode]||e.default,n=new r(this.__.textformOptions());if(this.textform=n,t.hover||t.press)this.bind();else if(!t.autoplay)return;this.player=new TextformPlayer(this.__.autoplayOptions()),t.autoplay&&this.play()}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{output:void 0},e=ut(ut({},this.options),t);return new Textformer(e)}},{key:"dispose",value:function(){this.stop(),this.unbind()}},{key:"convertSpeedToDuration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.speed;if(!this.textform)return Textformer.DEFAULT_DURATION;var e=this.textform.finalFrame;return e*(1e3/t)}},{key:"__init",value:function(){var t={};t.in=function(){var t=this.player;t&&(t.isReversed=!1),!t.isPlaying&&t.progress<1&&t.play()}.bind(this),t.out=function(){var t=this.player;t&&(t.isReversed=!0),!t.isPlaying&&t.progress>0&&t.play()}.bind(this),t.textformOptions=function(){var t=Textformer.DEFAULT_TEXT,e=ut({},this.options),r=e.from,n=e.to,o=e.align,i=e.fill,s=new it(e.output);if(s.isValid){var u=s.inputText||t;s.referenceText=n||r||u,void 0===r&&(e.from=u),void 0===n&&(e.to=u),e.output=s}else e.output=void 0;if(e.from||(e.from=t),e.to||(e.to=t),o){var a=nt.align([e.from,e.to],o,i);e.from=a[0],e.to=a[1]}return e}.bind(this),t.autoplayOptions=function(){var t=this.textform,e=ut(ut({},this.options),{},{textform:t});return e.duration||(e.duration=this.convertSpeedToDuration(e.speed)),e.loop&&(e.repeat=-1),e}.bind(this),this.__=t}},{key:"bind",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.hover,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.press,n=this.textform,o=this.options;if(Object.assign(o,{hover:e,press:r}),(e||r)&&n&&n.output&&n.output.elements){var i=n.output.elements;i.forEach((function(n){e&&(n.addEventListener("pointerenter",t.__.in),n.addEventListener("pointerleave",t.__.out)),r&&(n.addEventListener("pointerdown",t.__.in),n.addEventListener("pointerup",t.__.out))})),this.dispatchers=i}}},{key:"unbind",value:function(){var t=this;this.dispatchers&&(this.dispatchers.forEach((function(e){e.addEventListener("pointerenter",t.__.in),e.addEventListener("pointerleave",t.__.out),e.addEventListener("pointerdown",t.__.in),e.addEventListener("pointerup",t.__.out)})),this.dispatchers=null)}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"pause",value:function(){this.player&&this.player.pause()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"progress",get:function(){return this.player?this.player.progress:this.textform.progress},set:function(t){this.player?this.player.progress=t:this.textform.progress=t}},{key:"speed",get:function(){return this.options.speed},set:function(t){var e=this.options;t<1&&(t=Textformer.DEFAULT_SPEED),e.speed=t,e.duration=this.convertSpeedToDuration(t)}},{key:"text",get:function(){return this.textform.text}}],e&&ft(t.prototype,e),r&&ft(t,r),Textformer}();return Textformer.align=nt.to,Textformer.charsets=rt,Textformer.easing=a,Textformer.ease=a.keys,Textformer.modes={BASIC:"basic",REVERSE:"reverse",EXPAND:"expand",COLLAPSE:"collapse",SHUFFLE:"shuffle"},Textformer.DEFAULT_TEXT="",Textformer.DEFAULT_SPEED=15,Textformer.DEFAULT_DURATION=1e3,Textformer.DEFAULT_EASING=Textformer.ease.LINEAR,e=e.Textformer})()}));