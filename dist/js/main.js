(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.from,o=e.to,i=e.align,a=e.fill;t(this,n),Object.assign(this,arguments[0]),this.length=Math.max(r.length,o.length),this.alignTexts(i,a),this.build(),this.reset()}var r,o;return r=n,(o=[{key:"alignTexts",value:function(t,e){if(t){var n=this.to.length-this.from.length;if(0!==n){for(var r=n>0?"from":"to",o=this[r],i=[],a=Math.abs(n),u=0;u<a;u++)i.push(e||this.generateRandomChar());this[r]=t(o,i.join(""))}}}},{key:"build",value:function(){for(var t=this.length,e=this.from,n=this.to,r=this.steps,o=this.computeStartFrames(),i=[],a=0;a<t;a++){var u=[],c=o[a],s=c+r,f=e.charAt(a),l=n.charAt(a);u.push({frame:c,char:f});for(var p=c+1;p<s;p++){var h=this.generateRandomChar();u.push({frame:p,char:h})}u.push({frame:s,char:l}),i[a]=u}this.scenario=i,this.totalFrames=Math.max.apply(Math,i.map((function(t){return t.map((function(t){return t.frame}))})).flat())}},{key:"computeStartFrames",value:function(){var t=this.length,e=this.stagger;return Array.from({length:t}).map((function(t,n){return n*e}))}},{key:"generateRandomChar",value:function(){var t=this.charset,e=Math.floor(Math.random()*t.length);return t.charAt(e)}},{key:"getCharAt",value:function(t,e){var n=this.scenario[t],r=n.filter((function(t){return t.frame===e}))[0];if(!r){var o=n[0].frame,i=n[n.length-1].frame,a=e>i?i:o;r=n.filter((function(t){return t.frame===a}))[0]}return r.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this.frame,e=this.length,n=this.getCharAt.bind(this);this.text=Array.from({length:e}).map((function(e,r){return n(r,t)})).join(""),this.output&&(this.output.textContent=this.text)}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.totalFrames*t)}}])&&e(r.prototype,o),n}();function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.charsets={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",DIGITS:"0123456789",SYMBOLS:"!@#$%&?"},n.charsets.LOWERCASE=n.charsets.UPPERCASE.toLowerCase(),n.charsets.ALL=Object.values(n.charsets).join(""),n.aligns={none:!1,left:function(t,e){return"".concat(t).concat(e)},center:function(t,e){var n=e.length,r=Math.floor(n/2),o=e.substring(0,r),i=e.substring(r,n);return"".concat(o).concat(t).concat(i)},right:function(t,e){return"".concat(e).concat(t)}};var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(l,t);var e,n,r,s,f=(r=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(r);if(s){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function l(){return o(this,l),f.apply(this,arguments)}return e=l,(n=[{key:"computeStartFrames",value:function(){var t=this.length,e=this.steps,n=.382*t*this.stagger+e;return Array.from({length:t}).map((function(){return t=n,Math.floor(Math.random()*(t-0+1)+0);var t}))}}])&&i(e.prototype,n),l}(n);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return m(this,t)});function a(){return l(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"computeStartFrames",value:function(){return h(d(a.prototype),"computeStartFrames",this).call(this).reverse()}}])&&p(e.prototype,n),a}(n);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return P(this,t)});function a(){return b(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"computeStartFrames",value:function(){var t=w(S(a.prototype),"computeStartFrames",this).call(this);return a.shuffle(t),t}}])&&O(e.prototype,n),a}(n);function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}C.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}};var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),Object.assign(this,e)}var e,n;return e=t,(n=[{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.time&&t&&(this.time=t);var e=this.textform,n=this.onChange,r=this.onComplete,o=this.duration,i=this.time,a=t-i;if(a>o)return e.progress=1,r&&r.call(),this.stop();var u=e.frame;e.progress=a/o,e.frame!==u&&n&&n.call(),this.requestAnimationFrame()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.animationFrame=requestAnimationFrame(this.animate.bind(this))}))},{key:"play",value:function(){var t=this.onBegin;t&&t.call(),this.time=0,this.textform.progress=0;var e=this.delay>0?this.delay:0;this.timeout=setTimeout(this.requestAnimationFrame.bind(this),e)}},{key:"stop",value:function(){clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame)}}])&&R(e.prototype,n),t}();function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode,o=void 0===r?t.modes.default:r,i=e.autoPlay,a=void 0===i||i,u=e.speed,c=void 0===u?15:u,s=e.from,f=void 0===s?"Demo":s,l=e.to,p=void 0===l?"Textformer":l,h=e.steps,y=void 0===h?5:h,m=e.stagger,d=void 0===m?3:m,g=e.output,v=e.charset,b=void 0===v?n.charsets.ALL:v,O=e.align,w=void 0===O?n.aligns.none:O,j=e.fill,P=void 0===j?" ":j,S=e.delay,C=void 0===S?0:S,k=e.duration,R=e.onBegin,_=e.onChange,E=e.onComplete;x(this,t),Object.assign(this,{mode:o,autoPlay:a,speed:c,options:{output:g,from:f,to:p,steps:y,stagger:d,charset:b,align:w,fill:P},playerOptions:{duration:k,delay:C,onBegin:R,onChange:_,onComplete:E}}),this.build()}var e,r;return e=t,(r=[{key:"build",value:function(){var t=this.autoPlay,e=this.playerOptions,n=this.player,r=new this.mode(this.options);if(this.textform=r,t){if(!e.duration){var o=Math.abs(this.speed)||1;e.duration=r.totalFrames*(1e3/o)}e.textform=r,n&&n.stop(),this.player=new _(e),this.play()}}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"replay",value:function(){this.stop(),this.play()}},{key:"progress",get:function(){return this.textform.progress},set:function(t){this.textform.progress=t}},{key:"text",get:function(){return this.textform.text}}])&&E(e.prototype,r),t}();A.modes={default:n,reversed:g,shuffled:C,random:s};const F=dat.gui;function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B={output:document.querySelector("#demo-text"),from:"",to:"Textformer",steps:5,stagger:3,speed:15,delay:500,mode:"random",align:"left"},L=new A(M(M({},B),{},{mode:A.modes[B.mode],align:n.aligns[B.align]}));function q(){L.mode=A.modes[B.mode],L.options.align=n.aligns[B.align],L.options.fill.length>0&&(L.options.fill=L.options.fill.charAt(0)),L.playerOptions.duration=0,L.build(),I.updateDisplay()}var I=new F.GUI,U=I.addFolder("Textform");U.add(L.options,"from").onChange(q),U.add(L.options,"to").onChange(q),U.add(B,"mode",Object.keys(A.modes)).onChange(q),U.add(L.options,"steps",1,60).step(1).onChange(q),U.add(L.options,"stagger",0,30).step(1).onChange(q),U.open();var G=I.addFolder("Animation");G.add(L,"speed",1,30).step(1).onChange(q),G.add(L,"progress",0,1).step(.001).listen(),G.add(L,"replay"),G.open();var W=I.addFolder("Advanced");W.add(B,"align",Object.keys(n.aligns)).onChange(q),W.add(L.options,"fill").onChange(q),W.add(L.options,"charset",n.charsets).onChange(q),W.add(L.playerOptions,"duration",150,1e4).step(50).onChange((function(){L.build()})),W.add(L.playerOptions,"delay",0,5e3).step(50).onChange(q)})();