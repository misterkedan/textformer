(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.from,o=e.to,i=e.align,a=e.fill;t(this,n),Object.assign(this,arguments[0]),this.length=Math.max(r.length,o.length),this.alignTexts(i,a),this.build(),this.reset()}var r,o;return r=n,(o=[{key:"alignTexts",value:function(t,e){var n=this;if(t){var r=this.to.length-this.from.length;if(0!==r){var o=r>0?"from":"to",i=this[o],a=Math.abs(r),c=e?function(){return e}:function(){return n.generateRandomChar()},s=Array.from({length:a}).map(c).join("");this[o]=t(i,s)}}}},{key:"build",value:function(){for(var t=this.length,e=this.from,n=this.to,r=this.steps,o=this.computeStartFrames(),i=[],a=0;a<t;a++){var c=[],s=o[a],u=s+r,l=e.charAt(a),f=n.charAt(a);c.push({frame:s,char:l});for(var p=s+1;p<u;p++){var h=this.generateRandomChar();c.push({frame:p,char:h})}c.push({frame:u,char:f}),i[a]=c}this.scenario=i,this.totalFrames=Math.max.apply(Math,i.map((function(t){return t.map((function(t){return t.frame}))})).flat())}},{key:"computeStartFrames",value:function(){var t=this.length,e=this.stagger;return Array.from({length:t}).map((function(t,n){return n*e}))}},{key:"generateRandomChar",value:function(){var t=this.charset,e=Math.floor(Math.random()*t.length);return t.charAt(e)}},{key:"getCharAt",value:function(t,e){var n=this.scenario[t],r=n.filter((function(t){return t.frame===e}))[0];if(!r){var o=n[0].frame,i=n[n.length-1].frame,a=e>i?i:o;r=n.filter((function(t){return t.frame===a}))[0]}return r.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this.frame,e=this.length,n=this.getCharAt.bind(this);this.text=Array.from({length:e}).map((function(e,r){return n(r,t)})).join(""),this.output&&(this.output.innerHTML=this.text.replace(/ /g,"&nbsp;"))}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.totalFrames*t)}}])&&e(r.prototype,o),n}();function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.charsets={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",DIGITS:"0123456789",SYMBOLS:"!@#$%&?"},n.charsets.LOWERCASE=n.charsets.UPPERCASE.toLowerCase(),n.charsets.ALL=Object.values(n.charsets).join(""),n.aligns={none:!1,left:function(t,e){return"".concat(t).concat(e)},center:function(t,e){var n=e.length,r=Math.floor(n/2),o=e.substring(0,r),i=e.substring(r,n);return"".concat(o).concat(t).concat(i)},right:function(t,e){return"".concat(e).concat(t)}};var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t);var e,n,r,u,l=(r=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(u){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function f(){return o(this,f),l.apply(this,arguments)}return e=f,(n=[{key:"computeStartFrames",value:function(){var t=this.length,e=this.steps,n=.382*t*this.stagger+e;return Array.from({length:t}).map((function(){return t=n,Math.floor(Math.random()*(t-0+1)+0);var t}))}}])&&i(e.prototype,n),f}(n);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return y(this,t)});function a(){return f(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"computeStartFrames",value:function(){return h(d(a.prototype),"computeStartFrames",this).call(this).reverse()}}])&&p(e.prototype,n),a}(n);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function a(){return v(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"computeStartFrames",value:function(){var t=O(P(a.prototype),"computeStartFrames",this).call(this);return a.shuffle(t),t}}])&&w(e.prototype,n),a}(n);function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}x.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}};var R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(this,t),Object.assign(this,e)}var e,n;return e=t,(n=[{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.time&&t&&(this.time=t);var e=this.textform,n=this.onChange,r=this.onComplete,o=this.duration,i=this.time,a=t-i;if(a>o)return e.progress=1,r&&r.call(),this.stop();var c=e.frame;e.progress=a/o,e.frame!==c&&n&&n.call(),this.requestAnimationFrame()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.animationFrame=requestAnimationFrame(this.animate.bind(this))}))},{key:"play",value:function(){var t=this.onBegin;t&&t.call(),this.time=0,this.textform.progress=0;var e=this.delay>0?this.delay:0;this.timeout=setTimeout(this.requestAnimationFrame.bind(this),e)}},{key:"stop",value:function(){clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame)}}])&&C(e.prototype,n),t}();function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode,o=void 0===r?t.modes.default:r,i=e.autoPlay,a=void 0===i||i,c=e.speed,s=void 0===c?15:c,u=e.from,l=void 0===u?"Demo":u,f=e.to,p=void 0===f?"Textformer":f,h=e.steps,m=void 0===h?5:h,y=e.stagger,d=void 0===y?3:y,g=e.output,b=e.charset,v=void 0===b?n.charsets.ALL:b,w=e.align,O=void 0===w?n.aligns.none:w,k=e.fill,j=void 0===k?" ":k,P=e.delay,x=void 0===P?0:P,S=e.duration,C=e.onBegin,R=e.onChange,A=e.onComplete;_(this,t),Object.assign(this,{mode:o,autoPlay:a,speed:s,options:{output:g,from:l,to:p,steps:m,stagger:d,charset:v,align:O,fill:j},playerOptions:{duration:S,delay:x,onBegin:C,onChange:R,onComplete:A}}),this.build()}var e,r;return e=t,(r=[{key:"build",value:function(){var t=this.autoPlay,e=this.playerOptions,n=this.player,r=new this.mode(this.options);if(this.textform=r,t){if(!e.duration){var o=Math.abs(this.speed)||1;e.duration=r.totalFrames*(1e3/o)}e.textform=r,n&&n.stop(),this.player=new R(e),this.play()}}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"replay",value:function(){this.stop(),this.play()}},{key:"progress",get:function(){return this.textform.progress},set:function(t){this.textform.progress=t}},{key:"text",get:function(){return this.textform.text}}])&&A(e.prototype,r),t}();E.aligns=n.aligns,E.charsets=n.charsets,E.modes={default:n,reversed:g,shuffled:x,random:u};const T=dat.gui;function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B={output:document.querySelector("#demo-text"),from:"Hello",to:"Textformer",steps:5,stagger:3,speed:15,delay:500,mode:"random",align:"left"},q=new E(M(M({},B),{},{mode:E.modes[B.mode],align:E.aligns[B.align]}));function z(){q.mode=E.modes[B.mode],q.options.align=E.aligns[B.align],q.options.fill.length>0&&(q.options.fill=q.options.fill.charAt(0)),q.playerOptions.duration=0,q.build(),L.updateDisplay()}var L=new T.GUI,I=L.addFolder("Textform");I.add(q.options,"from").onChange(z),I.add(q.options,"to").onChange(z),I.add(B,"mode",Object.keys(E.modes)).onChange(z),I.add(q.options,"steps",1,60).step(1).onChange(z),I.add(q.options,"stagger",0,30).step(1).onChange(z),I.open();var U=L.addFolder("Animation");U.add(q,"speed",1,30).step(1).onChange(z),U.add(q,"progress",0,1).step(.001).listen(),U.add(q,"replay"),U.open();var G=L.addFolder("Advanced");G.add(B,"align",Object.keys(E.aligns)).onChange(z),G.add(q.options,"fill").onChange(z),G.add(q.options,"charset",E.charsets).onChange(z),G.add(q.playerOptions,"duration",150,1e4).step(50).onChange((function(){q.build()})),G.add(q.playerOptions,"delay",0,5e3).step(50).onChange(z);var H=navigator.userAgent||navigator.vendor||window.opera,W=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|mediump|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(H)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(H.substr(0,4)),Y=window.innerWidth<640;(W||Y)&&L.close()})();