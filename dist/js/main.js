(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.texts,o=e.charset,a=e.steps,i=e.stagger;t(this,n),Object.assign(this,{texts:r,charset:o,steps:a,stagger:i}),this.maxLength=this.texts.reduce((function(t,e){return t.length>e.length?t.length:e.length})),this.build(),this.finalFrame=this.frames.length-1,this.reset()}var r,o;return r=n,(o=[{key:"build",value:function(){this.frames=[],console.warn("Abstract class")}},{key:"reset",value:function(){this.currentFrame=0,this.chars=this.texts[0].split(""),this.isComplete=!1}},{key:"step",value:function(){this.currentFrame<this.finalFrame&&(this.currentFrame++,this.update(),this.currentFrame===this.finalFrame&&(this.isComplete=!0))}},{key:"update",value:function(){var t=this.frames[this.currentFrame];for(var e in t){var n=t[e];this.chars[n.i]=n.char}}},{key:"getRandomChar",value:function(){var t=this.charset,e=Math.floor(Math.random()*t.length);return t.charAt(e)}},{key:"text",get:function(){return this.chars.join("")}}])&&e(r.prototype,o),n}();function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.charsets={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",DIGITS:"0123456789",SYMBOLS:"!@#$%&?"},n.charsets.LOWERCASE=n.charsets.UPPERCASE.toLowerCase(),n.charsets.ALL=Object.values(n.charsets).join("");var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(l,t);var e,n,r,c,f=(r=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(r);if(c){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)});function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,l),f.call(this,t)}return e=l,(n=[{key:"build",value:function(){for(var t=[],e=this.texts,n=e.length-1,r=0;r<n;r++)for(var o=e[r],a=e[r+1]||e[a],i=0,s=this.maxLength;i<s;i++)for(var u=i*this.stagger,c=u+this.steps,f=o.charAt(i),l=a.charAt(i),h=u;h<=c;h++){t[h]||(t[h]=[]);var p=h-u,m=p===this.steps?l:0===p?f:this.getRandomChar();t[h].push({i,char:m})}this.frames=t}}])&&a(e.prototype,n),l}(n);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){var n=e.textform,r=e.fps,o=e.onBegin,a=e.onUpdate,i=e.onComplete;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,{textform:n,fps:r,onBegin:o,onUpdate:a,onComplete:i})}var e,n;return e=t,(n=[{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.textform,n=this.onUpdate,r=this.onComplete;this.time||(this.time=t);var o=t-this.time,a=this.frameDuration-o;if(a<=0){if(e.isComplete)return r&&r.call(),cancelAnimationFrame(this.animationFrame);e.step(),n&&n.call(),this.time=t+a}this.requestAnimationFrame()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.animationFrame=requestAnimationFrame(this.animate.bind(this))}))},{key:"play",value:function(){var t=this.onBegin;this.frameDuration=1e3/this.fps,this.time=0,t&&t.call(),this.requestAnimationFrame()}},{key:"stop",value:function(){cancelAnimationFrame(this.animationFrame)}},{key:"reset",value:function(){this.textform.reset()}},{key:"replay",value:function(){this.stop(),this.reset(),this.play()}}])&&f(e.prototype,n),t}();function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.texts,o=void 0===r?["","Textformer"]:r,a=e.charset,i=void 0===a?n.charsets.ALL:a,s=e.steps,u=void 0===s?5:s,c=e.stagger,f=void 0===c?3:c,p=e.fps,m=void 0===p?15:p,y=e.onBegin,d=void 0===y?null:y,v=e.onUpdate,g=void 0===v?null:v,b=e.onComplete,x=void 0===b?null:b,w=e.mode,C=void 0===w?t.modes.linear:w,k=e.autoPlay,O=void 0===k||k;if(h(this,t),!o||!Array.isArray(o)||"string"!=typeof o[0])throw new TypeError('Parameter "texts" must be an array of strings');var F={texts:o,charset:i,steps:u,stagger:f};Object.assign(this,{mode:C,options:F,fps:m,onBegin:d,onUpdate:g,onComplete:x,autoPlay:O}),this.autoPlay&&(this.player=new l({fps:m,onBegin:d,onUpdate:g,onComplete:x})),this.build()}var e,r;return e=t,(r=[{key:"build",value:function(){if(this.mode.prototype instanceof n==0)throw new Error("Please select a mode from Texformer.modes");var t=new this.mode(this.options);this.textform=t,this.autoPlay&&(this.player.textform=t,this.replay())}},{key:"play",value:function(){this.player.play()}},{key:"replay",value:function(){this.player.replay()}},{key:"text",get:function(){return this.textform.text}}])&&p(e.prototype,r),t}();m.modes={linear:c};const y=dat.gui;var d=document.querySelector("#demo-text"),v=new m({onUpdate:function(){d.innerHTML=v.text}}),g={start:"",end:"Textformer",fps:15,steps:5,stagger:3,charset:"ALL"};function b(){g.start||g.end||(g.start="",g.end=" "),v.options.texts=[g.start,g.end],v.options.charset=n.charsets[g.charset],v.options.steps=g.steps,v.options.stagger=g.stagger,v.fps=g.fps,v.build()}var x=new y.GUI,w=x.addFolder("Texts");w.add(g,"start").onChange(b),w.add(g,"end").onChange(b),w.open();var C=x.addFolder("Textformer");C.add(g,"charset",Object.keys(n.charsets)).onChange(b),C.add(g,"steps",1,60).step(1).onChange(b),C.add(g,"stagger",0,30).step(1).onChange(b),C.add(g,"fps",1,30).step(1).onChange(b),C.add(v,"replay"),C.open()})();