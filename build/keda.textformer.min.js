!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.KEDA=e():(t.KEDA=t.KEDA||{},t.KEDA.Textformer=e())}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.d(e,{default:()=>$});var Textform=function(){function Textform(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.from,n=t.to;r(this,Textform),Object.assign(this,arguments[0]),this.length=Math.max(e.length,n.length),this.build(),this.reset()}var t,e,o;return t=Textform,e=[{key:"build",value:function(){var t=this,e=this.length,r=this.from,n=this.to,o=this.computeStartFrames(),i=function(e){var i=r.charAt(e),u=n.charAt(e),a=function(t){return t.match(/\r|\n|\t/)};if(a(i))return[{frame:0,char:i}];if(a(u))return[{frame:0,char:u}];var c=t.randomize(t.steps),f=o[e],s=f+c;return Array.from({length:c+1},(function(e,r){return function(e){var r=f+e;return{frame:r,char:r===f?i:r===s?u:t.generateRandomChar()}}(r)}))},u=Array.from({length:e},(function(t,e){return i(e)}));this.finalFrame=u.flat().reduce((function(t,e){return Math.max(t,e.frame)}),0),this.scenario=u}},{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin;return n?Array.from({length:e},(function(o,i){var u=i-n,a=u>=0?u*r:(e+u)*r;return t.randomize(a)})):Array.from({length:e},(function(e,n){var o=n*r;return t.randomize(o)}))}},{key:"randomize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.randomness;if(!n)return t;var o=t-e*n,i=t+r*n;return Textform.generateRandomInt(o,i)}},{key:"generateRandomChar",value:function(){var t=this.charset,e=Textform.generateRandomInt(0,t.length-1);return t.charAt(e)}},{key:"getCharAt",value:function(t,e){var r=this.scenario[t],n=r.filter((function(t){return t.frame===e}))[0];if(!n){var o=r[0].frame,i=r[r.length-1].frame,u=e>i?i:o;n=r.filter((function(t){return t.frame===u}))[0]}return n.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this,e=this.frame,r=this.length;this.chars=Array.from({length:r},(function(r,n){return t.getCharAt(n,e)})),this.text=this.chars.join(""),this.output&&(this.output.innerHTML=this.text.replace(/ /g,"&nbsp;").replace(/\t/g,"&emsp;").replace(/\n/g,"<br>").replace(/\r/g,"<br>"))}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.finalFrame*t)}},{key:"hasValidOrigin",get:function(){var t=this.origin,e=this.length;return void 0!==t&&t>=0&&t<e}}],e&&n(t.prototype,e),o&&n(t,o),Textform}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Textform.generateRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},Textform.charsets={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",DIGITS:"0123456789",SYMBOLS:"!@#$%&?"},Textform.charsets.LOWERCASE=Textform.charsets.UPPERCASE.toLowerCase(),Textform.charsets.ALL=Object.values(Textform.charsets).join("");var TextformPlayer=function(){function TextformPlayer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,TextformPlayer),Object.assign(this,t)}var t,e,r;return t=TextformPlayer,e=[{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.time&&t&&(this.time=t);var e=this.textform,r=this.onChange,n=this.onComplete,o=this.duration,i=this.time,u=t-i;if(u>o)return e.progress=1,n&&n.call(),this.stop();var a=e.frame;e.progress=u/o,e.frame!==a&&r&&r.call(),this.requestAnimationFrame()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.animationFrame=requestAnimationFrame(this.animate.bind(this))}))},{key:"play",value:function(){var t=this.onBegin;t&&t.call(),this.time=0,this.textform.progress=0;var e=this.delay>0?this.delay:0;this.timeout=setTimeout(this.requestAnimationFrame.bind(this),e)}},{key:"stop",value:function(){clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame)}}],e&&i(t.prototype,e),r&&i(t,r),TextformPlayer}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}},f(t,e,r||t)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,r,n,o=l(i);function i(){return a(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){return f(h(i.prototype),"computeStartFrames",this).call(this).reverse()}}])&&c(e.prototype,r),n&&c(e,n),i}(Textform);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=w(t);if(e){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,t);var e,r,n,o=d(i);function i(){return v(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasValidOrigin,i=o?n:Math.floor((e-1)/2),u=o||e%2!=0?i:i+1;return Array.from({length:e},(function(e,n){var o=n<u?i-n:n-u;return t.randomize(o*r)}))}}])&&b(e.prototype,r),n&&b(e,n),i}(Textform);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e){return E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},E(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return k(this,r)}}function k(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(i,t);var e,r,n,o=_(i);function i(){return S(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasValidOrigin?n:Math.round((e-1)/2);return Array.from({length:e},(function(n,i){var u=i<o?i:e-1-i;return t.randomize(u*r)}))}}])&&R(e.prototype,r),n&&R(e,n),i}(Textform);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function F(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function B(t,e,r){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}},B(t,e,r||t)}function L(t,e){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return z(this,r)}}function z(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(i,t);var e,r,n,o=I(i);function i(){return M(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this.origin,e=this.stagger,r=i.shuffle(B(N(i.prototype),"computeStartFrames",this).call(this));return this.hasValidOrigin&&e>0?((r=r.filter((function(t){return t>0}))).splice(t,0,0),r):r}}])&&D(e.prototype,r),n&&D(e,n),i}(Textform);function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}K.shuffle=function(t){for(var e=F(t),r=t.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),o=[e[n],e[r]];e[r]=o[0],e[n]=o[1]}return e};var U=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.to.LEFT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";V(this,t),n||(n=" "),Object.assign(this,{input:e,to:r,fill:n}),this.compute()}var e,r,n;return e=t,(r=[{key:"compute",value:function(){var t=this,e=this.input,r=this.fill,n=e.reduce((function(t,e){return Math.max(t,e.length)}),0);this.length=n;var o=r.length,i=Math.ceil(n/o);this.computedFill=r.repeat(i).substring(0,n-1),this.output=this.input.map((function(e){return t.align(e)}))}},{key:"align",value:function(t){var e=this.length,r=this.to,n=this.computedFill,o=e-t.length;if(0===o)return t;var i,u,a,c={left:function(){return 0},center:function(){return Math.floor(o/2)},right:function(){return o},default:function(){return r}},f=(c[r]||c.default)();return(i=n,u=t,a=f,[i.slice(0,a),u,i.slice(a)].join("")).slice(0,e)}}])&&q(e.prototype,r),n&&q(e,n),t}();function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}U.to={NONE:"none",LEFT:"left",CENTER:"center",RIGHT:"right"};var Textformer=function(){function Textformer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode,r=void 0===e?Textformer.modes.default:e,n=t.from,o=void 0===n?"":n,i=t.to,u=void 0===i?"":i,a=t.steps,c=void 0===a?5:a,f=t.stagger,s=void 0===f?3:f,l=t.randomness,p=void 0===l?0:l,h=t.origin,y=t.output,m=t.charset,v=void 0===m?Textformer.charsets.ALL:m,b=t.align,g=void 0===b?{to:Textformer.align.NONE,fill:" "}:b,d=t.autoplay,O=void 0===d?{speed:15,delay:0}:d;W(this,Textformer),Object.assign(this,{mode:r,autoplay:O,options:{align:g,from:o,to:u,steps:c,stagger:s,randomness:p,origin:h,output:y,charset:v}}),this.build()}var t,e,r;return t=Textformer,e=[{key:"build",value:function(){this.destroy();var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){H(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.options);if(t.align){var e=t.align.to;this.align=e;var r=new U([t.from,t.to],e,t.align.fill).output;t.from=r[0],t.to=r[1]}var n=new this.mode(t);this.textform=n;var o,i=this.autoplay;i&&(i.textform=n,i.duration||(i.duration=(o=Math.abs(i.speed)||1,n.finalFrame*(1e3/o))),this.player=new TextformPlayer(i),this.play())}},{key:"destroy",value:function(){delete this.textform,this.stop(),delete this.player}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"replay",value:function(){this.stop(),this.play()}},{key:"progress",get:function(){return this.textform.progress},set:function(t){this.textform.progress=t}},{key:"text",get:function(){return this.textform.text}}],e&&Y(t.prototype,e),r&&Y(t,r),Textformer}();Textformer.align=U.to,Textformer.charsets=Textform.charsets,Textformer.modes={default:Textform,reverse:y,expand:j,collapse:x,shuffle:K};const $=Textformer;return e=e.default})()}));