!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.KEDA=e():(t.KEDA=t.KEDA||{},t.KEDA.Textformer=e())}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>Y});var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.align=function(t){var e=t.from,n=t.to,o=t.align,i=t.fill;if(void 0!==o){var a=r.modes,u=isNaN(o)?o:o>=0?o<t.length?a.offset:a.right:a.left,c=n.length-e.length;if(0!==c){var f=c>0?"from":"to",s=t[f],l=Math.abs(c),p=i?function(){return i}:function(){return t.generateRandomChar()},h=Array.from({length:l},p).join("");t[f]=u(s,h,o)}}},r.modes={none:void 0,left:function(t,e){return"".concat(t).concat(e)},center:function(t,e,r){var n=e.length;isNaN(r)&&(r=Math.floor(n/2));var o=e.substring(0,r),i=e.substring(r,n);return"".concat(o).concat(t).concat(i)},right:function(t,e){return"".concat(e).concat(t)},offset:function(t,e,n){return r.modes.center(t,e,Math.round(n))}};var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.from,i=e.to;n(this,t),Object.assign(this,arguments[0]),this.length=Math.max(o.length,i.length),r.align(this),this.build(),this.reset()}var e,i,a;return e=t,i=[{key:"build",value:function(){var t=this,e=this.length,r=this.from,n=this.to,o=this.computeStartFrames(),i=0,a=function(e){var a=r.charAt(e),u=n.charAt(e),c=function(t){return t.match(/\r|\n|\t/)};if(c(a))return[{frame:0,char:a}];if(c(u))return[{frame:0,char:u}];var f=t.randomize(t.steps),s=o[e],l=s+f;return Array.from({length:f+1},(function(e,r){return function(e){var r=s+e;return r>i&&(i=r),{frame:r,char:r===s?a:r===l?u:t.generateRandomChar()}}(r)}))};this.scenario=Array.from({length:e},(function(t,e){return a(e)})),this.totalFrames=i+1}},{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin;return n?Array.from({length:e},(function(o,i){var a=i-n,u=a>=0?a*r:(e+a)*r;return t.randomize(u)})):Array.from({length:e},(function(e,n){var o=n*r;return t.randomize(o)}))}},{key:"randomize",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=this.randomness;if(!o)return e;var i=e-r*o,a=e+n*o;return t.generateRandomInt(i,a)}},{key:"generateRandomChar",value:function(){var e=this.charset,r=t.generateRandomInt(0,e.length-1);return e.charAt(r)}},{key:"getCharAt",value:function(t,e){var r=this.scenario[t],n=r.filter((function(t){return t.frame===e}))[0];if(!n){var o=r[0].frame,i=r[r.length-1].frame,a=e>i?i:o;n=r.filter((function(t){return t.frame===a}))[0]}return n.char}},{key:"reset",value:function(){this.progress=0}},{key:"update",value:function(){var t=this,e=this.frame,r=this.length;this.chars=Array.from({length:r},(function(r,n){return t.getCharAt(n,e)})),this.text=this.chars.join(""),this.output&&(this.output.innerHTML=this.text.replace(/ /g,"&nbsp;").replace(/\t/g,"&emsp;").replace(/\n/g,"<br>").replace(/\r/g,"<br>"))}},{key:"frame",get:function(){return this._frame},set:function(t){t!==this._frame&&(this._frame=t,this.update())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,this.frame=Math.round(this.totalFrames*t)}},{key:"hasValidOrigin",get:function(){var t=this.origin,e=this.length;return void 0!==t&&t>=0&&t<e}}],i&&o(e.prototype,i),a&&o(e,a),t}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.generateRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},i.charsets={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",DIGITS:"0123456789",SYMBOLS:"!@#$%&?"},i.charsets.LOWERCASE=i.charsets.UPPERCASE.toLowerCase(),i.charsets.ALL=Object.values(i.charsets).join("");var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),Object.assign(this,e)}var e,r,n;return e=t,r=[{key:"animate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!this.time&&t&&(this.time=t);var e=this.textform,r=this.onChange,n=this.onComplete,o=this.duration,i=this.time,a=t-i;if(a>o)return e.progress=1,n&&n.call(),this.stop();var u=e.frame;e.progress=a/o,e.frame!==u&&r&&r.call(),this.requestAnimationFrame()}},{key:"requestAnimationFrame",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.animationFrame=requestAnimationFrame(this.animate.bind(this))}))},{key:"play",value:function(){var t=this.onBegin;t&&t.call(),this.time=0,this.textform.progress=0;var e=this.delay>0?this.delay:0;this.timeout=setTimeout(this.requestAnimationFrame.bind(this),e)}},{key:"stop",value:function(){clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame)}}],r&&u(e.prototype,r),n&&u(e,n),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}},p(t,e,r||t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,t);var e,r,n,o=y(i);function i(){return s(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){return p(v(i.prototype),"computeStartFrames",this).call(this).reverse()}}])&&l(e.prototype,r),n&&l(e,n),i}(i);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=R(t);if(e){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(i,t);var e,r,n,o=j(i);function i(){return d(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasValidOrigin,i=o?n:Math.floor((e-1)/2),a=o||e%2!=0?i:i+1;return Array.from({length:e},(function(e,n){var o=n<a?i-n:n-a;return t.randomize(o*r)}))}}])&&O(e.prototype,r),n&&O(e,n),i}(i);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e){return k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},k(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=T(t);if(e){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return C(this,r)}}function C(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(i,t);var e,r,n,o=x(i);function i(){return A(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this,e=this.length,r=this.stagger,n=this.origin,o=this.hasValidOrigin?n:Math.round((e-1)/2);return Array.from({length:e},(function(n,i){var a=i<o?i:e-1-i;return t.randomize(a*r)}))}}])&&E(e.prototype,r),n&&E(e,n),i}(i);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function B(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z(t,e,r){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}},z(t,e,r||t)}function K(t,e){return K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},K(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=q(t);if(e){var o=q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return V(this,r)}}function V(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,t);var e,r,n,o=N(i);function i(){return I(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"computeStartFrames",value:function(){var t=this.origin,e=this.stagger,r=i.shuffle(z(q(i.prototype),"computeStartFrames",this).call(this));return this.hasValidOrigin&&e>0?((r=r.filter((function(t){return t>0}))).splice(t,0,0),r):r}}])&&L(e.prototype,r),n&&L(e,n),i}(i);function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}U.shuffle=function(t){for(var e=B(t),r=t.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),o=[e[n],e[r]];e[r]=o[0],e[n]=o[1]}return e};var W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode,n=void 0===r?t.modes.default:r,o=e.autoplay,i=void 0===o||o,a=e.speed,u=void 0===a?15:a,c=e.from,f=void 0===c?"Demo":c,s=e.to,l=void 0===s?"Textformer":s,p=e.steps,h=void 0===p?5:p,y=e.stagger,m=void 0===y?3:y,v=e.randomness,b=void 0===v?0:v,g=e.origin,d=e.output,O=e.charset,w=void 0===O?t.charsets.ALL:O,j=e.align,S=void 0===j?t.aligns.left:j,R=e.fill,P=void 0===R?" ":R,_=e.delay,A=void 0===_?0:_,E=e.duration,k=e.onBegin,x=e.onChange,C=e.onComplete;G(this,t),Object.assign(this,{mode:n,autoplay:i,speed:u,options:{from:f,to:l,steps:h,stagger:m,randomness:b,origin:g,output:d,charset:w,align:S,fill:P},playerOptions:{duration:E,delay:A,onBegin:k,onChange:x,onComplete:C}}),this.build()}var e,r,n;return e=t,(r=[{key:"build",value:function(){var t=this.autoplay,e=this.playerOptions,r=this.player,n=new this.mode(this.options);if(this.textform=n,t){if(!e.duration){var o=Math.abs(this.speed)||1;e.duration=n.totalFrames*(1e3/o)}e.textform=n,r&&r.stop(),this.player=new c(e),this.play()}}},{key:"play",value:function(){this.player&&this.player.play()}},{key:"stop",value:function(){this.player&&this.player.stop()}},{key:"replay",value:function(){this.stop(),this.play()}},{key:"progress",get:function(){return this.textform.progress},set:function(t){this.textform.progress=t}},{key:"text",get:function(){return this.textform.text}}])&&H(e.prototype,r),n&&H(e,n),t}();W.aligns=r.modes,W.charsets=i.charsets,W.modes={default:i,reverse:b,expand:P,collapse:F,shuffle:U};const Y=W;return e=e.default})()}));